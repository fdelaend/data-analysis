{
    "contents" : "\nrequire(lattice)\nrequire(vegan)\nrequire(mgcv)\nsource(\"/Users/frederik/Documents/work/functions/Functions.R\")\n#get locations of phytodata and corresponding substances and concentrations\nsource(\"/Users/frederik/Documents/work/BD_EF/data-analysis/PhytData.R\")\n#specify destination for plots and other output\nResultsFolder <- \"/Users/frederik/Documents/Results/BD_EF/data-analysis/\"\n#color specs: input for all possible color codes are generated here,\n#for later input into rgb\ncols <- expand.grid(c(0, 0.8), c(0.5, 0.8), c(0.5, 0.8))\n#where do the counts start in the files with counts? \nCountColsStart <- c(7, 6, 7, NA, 5, \n                    6, NA, 5)\n#starting and ending dates considered for analysis \n#(exclude before and after exposure period)\nStartDates <- c(1, 1, 21, -1e10, 1, 1, -1e10, 1)\nEndDates <- c(21, 21, 21, 1e10, 28, 80, 1e10, 4)\n#names given to indicate time in the data files\nTimeNames <- c(\"Days.p.a.\", \"Days.p.a.\", \"Days.p.a.\", \n               \"Time\", \"Week\", \"Week\", \"Time\", \"Week\") \n#names given to indicate treatment in the data files\nTreatmentNames <- rep(\"Treatment\", length(PhytData))\n#what will this analysis use as endpoints?\nendpoints <- c(\"Richness\", \"EF\")\n\nquartz(\"\",6,3,type=\"pdf\",\n       file=paste(ResultsFolder,\"Test.pdf\",sep=\"\"))\npar(mar=c(5,5,2,0.5), las=1, mfrow=c(1,2))\nplot(0,0,  main=\"A\",\n     xlim=c(-1,1), ylim=c(-1,1), \n     pch=19, xlab=\"Effect on richness\", \n     ylab=\"Effect on EF\")\n#allocate object to put in effects on ef \n#occurring with no effect on richness\nEFEffectsAtInvarRichness <- NULL\nfor (i in c(1:length(PhytData)))\n{\n  #Reading of data and EF calc\n  Data   <- read.delim(PhytData[i])\n  #Calculation of effects \n  Result <- BDEF(data=Data, #will throw a warning cause similarity not yet done \n                 CountCols=CountColsStart[i],           #correctly. No prob \n                 TimeName=TimeNames[i],                 #cause not used for now.\n                 TreatmentName=TreatmentNames[i],\n                 Affected = StartDates[i]-1e-10, #have to substract\n                 NoAffected = EndDates[i]+1e-10, #or add small nr cause \n                 endpoints = endpoints,          #< and > in BDEF function\n                 x=0)[[1]]\n  #Put everything together\n  Result <- cbind(Result$Richness, \n                  Result$EF[,c(\"EF\",\"EFEffect\", \n                               \"EFEffectTzero\")])\n  if (min(Concs[[i]])==0) #Concentrations will be log-transformed later \n  {                       #so we need to replace zero by a low nr.\n    Concs[[i]][1] <- Concs[[i]][2]/2\n  }\n  Result$Conc <- log10(Concs[[i]][as.numeric(Result$Treatment)]) #here's the log transform\n  source(\"DRM.r\")\n}\nabline(h=0)\nabline(v=0)\nlegend(\"topright\", \n       as.character(c(1:length(PhytData))),\n       pch=NA, lty=\"solid\", \n       cex=0.65, ncol=2,\n       col=rgb(cols[[1]][c(1:length(PhytData))], \n               cols[[2]][c(1:length(PhytData))], \n               cols[[3]][c(1:length(PhytData))], 1))\n\nplot(EFEffectsAtInvarRichness[,1],\n     EFEffectsAtInvarRichness[,2], main=\"B\",\n     col=rgb(cols[[1]][EFEffectsAtInvarRichness[,1]], \n             cols[[2]][EFEffectsAtInvarRichness[,1]], \n             cols[[3]][EFEffectsAtInvarRichness[,1]], 1),\n     xlab=\"Study\", ylab=\"Effect on EF \\n at invariant richness\",\n     pch=15)\nabline(h=0)\n\ndev.off()\n\n",
    "created" : 1476285323345.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2259134350",
    "id" : "1ABA883D",
    "lastKnownWriteTime" : 1476263813,
    "path" : "~/Documents/work/BD_EF/data-analysis/ProperDataAnalysis.R",
    "project_path" : "ProperDataAnalysis.R",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_source"
}